#databaseChangeLog:
#  - changeSet:
#      id: create-doc-table
#      author: maxmudovdavronbek8@gmail.com
#
#      changes:
#        - sqlFile:
#            path: db/changelog/changes/user/doc/create-doc.sql
#            stripComments: true
#
databaseChangeLog:
  - changeSet:
      id: 2023.12.18-create-client-table
      author: maxmudovdavronbek8@gmail.com
      changes:
        - createTable:
            tableName: client
            columns:
              - column:
                  name: act
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: correction_passport
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: dd
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: dr
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: dt
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: emergency_situations
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: gas_passport
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: id
                  type: int
                  constraints:
                    nullable: false
                    primaryKey: true
                    generated: 'ALWAYS AS IDENTITY'
              - column:
                  name: is_paid
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: last_verification
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: mechanical_damage
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: technical_condition
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: visual_damage
                  type: BOOLEAN
                  constraints:
                    nullable: false
              - column:
                  name: created_at
                  type: TIMESTAMP(6)
              - column:
                  name: conclusions
                  type: VARCHAR(255)
              - column:
                  name: counting_mechanism
                  type: VARCHAR(255)
              - column:
                  name: date
                  type: VARCHAR(255)
              - column:
                  name: indications
                  type: VARCHAR(255)
              - column:
                  name: mark
                  type: VARCHAR(255)
              - column:
                  name: org_name
                  type: VARCHAR(255)
              - column:
                  name: phone_number
                  type: VARCHAR(255)
              - column:
                  name: serial_number
                  type: VARCHAR(255)
              - column:
                  name: status
                  type: VARCHAR(255)
                  constraints:
                    check: "status IN ('RECEIVER', 'SPECIALIST', 'ACCOUNTANT', 'PAYMENT', 'STAFF', 'TEST', 'DOCS', 'END')"
              - column:
                  name: temperature
                  type: VARCHAR(255)

  - changeSet:
      id: 2023.12.18-create-doc-table
      author: your_author_name
      changes:
      - createTable:
          tableName: doc
          columns:
            - column:
                name: client_id
                type: INTEGER
            - column:
                name: id
                type: int
                constraints:
                  nullable: false
                  primaryKey: true
                  generated: 'ALWAYS AS IDENTITY'
            - column:
                name: image_url1
                type: VARCHAR(255)
            - column:
                name: image_url2
                type: VARCHAR(255)
            - column:
                name: image_url3
                type: VARCHAR(255)
            - column:
                name: image_url4
                type: VARCHAR(255)
              foreignKeys:
                - foreignKey:
                    name: fk_doc_client_id
                    references: client(id)

        - changeSet:
            id: 2023.12.18-create-history-table
            author: your_author_name
            changes:
              - createTable:
                  tableName: history
                  columns:
                    - column:
                        name: client_id
                        type: INTEGER
                    - column:
                        name: id
                        type: int
                        constraints:
                          nullable: false
                          primaryKey: true
                          generated: 'ALWAYS AS IDENTITY'
                    - column:
                        name: user_id
                        type: INTEGER
                    - column:
                        name: updated_at
                        type: TIMESTAMP(6)
                  foreignKeys:
                    - foreignKey:
                        name: fk_history_client_id
                        references: client(id)
                    - foreignKey:
                        name: fk_history_user_id
                        references: "user"(id)

        - changeSet:
            id: 2023.12.18-create-tool-table
            author: your_author_name
            changes:
              - createTable:
                  tableName: tool
                  columns:
                    - column:
                        name: arrival_time
                        type: DATE
                    - column:
                        name: client_id
                        type: INTEGER
                    - column:
                        name: count
                        type: INTEGER
                    - column:
                        name: id
                        type: int
                        constraints:
                          nullable: false
                          primaryKey: true
                          generated: 'ALWAYS AS IDENTITY'
                    - column:
                        name: price
                        type: INTEGER
                    - column:
                        name: cipher_number
                        type: VARCHAR(255)
                    - column:
                        name: name
                        type: VARCHAR(255)
                  foreignKeys:
                    - foreignKey:
                        name: fk_tool_client_id
                        references: client(id)

        - changeSet:
            id: 2023.12.18-create-user-table
            author: your_author_name
            changes:
              - createTable:
                  tableName: "user"
                  columns:
                    - column:
                        name: id
                        type: int
                        constraints:
                          nullable: false
                          primaryKey: true
                          generated: 'ALWAYS AS IDENTITY'
                    - column:
                        name: full_name
                        type: VARCHAR(255)
                    - column:
                        name: password
                        type: VARCHAR(255)
                        constraints:
                          nullable: false
                    - column:
                        name: role
                        type: VARCHAR(255)
                        constraints:
                          check: "role IN ('ROLE_ADMIN', 'ROLE_RECEIVER', 'ROLE_SPECIALIST', 'ROLE_ACCOUNTANT', 'ROLE_STAFF', 'ROLE_STANDARD')"
                    - column:
                        name: username
                        type: VARCHAR(255)
                        constraints:
                          nullable: false
                          unique: true